workflow:
  id: whiteport-design-workflow
  name: Whiteport Sketch-to-code method
  description: >-
    A design-centric workflow that guides a designer from initial conceptual sketches
    to structured, developer-ready documentation using a team of specialized AI agents.
  type: creative-design
  project_types:
    - conceptual-design
    - user-journey-mapping
    - ui-ux-planning

  sequence:
    - step: product_brief_creation
      agent: whiteport-analyst
      action: create-product-brief
      notes: "The Analyst creates the foundational product brief that defines project vision, goals, and strategic direction. This serves as the foundation for all subsequent design work."

    - step: ideation_and_strategy
      agent: whiteport-analyst
      action: create-trigger-map
      requires: product-brief-output
      notes: "The Analyst creates a detailed trigger map based on the product brief, mapping business goals to user needs and driving forces."

    - step: trigger_map_visualization
      agent: whiteport-analyst
      action: create-trigger-map-visualization
      requires: create-trigger-map-output
      notes: "Create visual representation of trigger map using Mermaid diagrams for stakeholder presentations and team reference."

    - step: persona_deep_dive
      agent: whiteport-analyst
      action: create-individual-personas
      requires: create-trigger-map-output
      notes: "Create separate, detailed persona files with personal context and relationship to core activity. Focus on individual files with rich backgrounds and standardized terminology."

    - step: design_system_selection
      agent: whiteport-analyst
      action: conduct-design-system-selection
      requires: product-brief-output
      notes: "The Analyst conducts systematic design system selection with the designer before sketching begins. This ensures the right design system foundation is chosen for the project."

    - step: scenario_formalization
      agent: pm
      action: create-doc with prd-tmpl
      requires: product-brief-output
      notes: "The PM formalizes the scenarios from the product brief and creates a high-level PRD that includes a list of scenarios. The PM then refrains from creating additional stories related to the interface until some scenario steps or complete scenarios are completed. Strictly backend related Epics and stories are created right away"

    - step: backend_epic_creation
      agent: pm
      action: create-backend-epics-and-stories
      requires: prd.md
      notes: "The PM creates Epics and stories for backend-only work that is not tied to a visual user interaction."
    
    - step: sketch_and_document
      agent: ux-expert
      action: facilitate sketching and documentation
      requires: prd.md
      notes: |
        The UX Expert collaborates with the designer to create and document the sketches.
        The agent manages the file structure, creates synopsis documents, and builds the component library based on the scenarios.

    - step: html_preview_creation
      agent: ux-expert
      action: create-html-preview
      requires: finalized-sketches-and-documentation
      notes: |
        The UX Expert creates interactive HTML previews from specifications for visual validation and refinement.
        Previews are created in Frontend/ folders within each scenario step as standalone HTML/CSS/JS files.
        This learning loop discovers gaps, refines specifications, and enriches the Design System before development.

    - step: static_component_creation
      agent: ux-expert
      action: create-static-components
      requires: html-preview-refinement-complete
      notes: |
        The UX Expert creates static React components matching sketches using the selected design system.
        Components are created in Frontend/ folders within each scenario step for concrete implementation targets.
        This step now benefits from the refined specifications and Design System updates from the HTML preview phase.

    - step: component_enhancement
      agent: ux-expert
      action: enhance-static-components
      requires: static-components-created
      notes: |
        The UX Expert enhances static components with responsive states, animations, and interactions.
        This creates the complete design-to-code bridge for seamless development handoff.

    - step: figma_integration
      agent: ux-expert
      action: integrate-figma-components
      requires: enhanced-static-components
      notes: |
        The UX Expert uses Figma MCP to add missing components and enhance existing static components.
        This bridges the gap between design tools and development implementation.

    - step: ui_epic-and-story-creation
      agent: pm
      action: create-ui-epics-and-stories
      requires: figma-integration-complete
      notes: |
        The PM returns to the project to break down the finalized conceptual sketches and static components into Epics and stories.
        This ensures that the project plan for user-facing features is aligned with the final visual design and implementation targets.

    - step: handoff-to-development
      agent: bmad-orchestrator
      action: guide handoff
      notes: |
        Once all documentation is completed, the Orchestrator guides the user
        in preparing the project for a handoff to the development agents (Dev, QA) for implementation.

  flow_diagram: |
    ```mermaid
    graph TD
      A[Start: Ideation] --> B[Analyst: create-product-brief]
      B --> C[Analyst: create-trigger-map]
      C --> C2[Analyst: create-trigger-map-visualization]
      C2 --> D[Analyst: create-individual-personas]
      D --> DS[Analyst: design-system-selection]
      DS --> E[PM: create high-level PRD]
      E --> F[PM: create backend Epics]
      F --> G[UX Expert: sketch & document]
      G --> HP[UX Expert: HTML preview & refinement]
      HP --> SC[UX Expert: create-static-components]
      SC --> CE[UX Expert: enhance-components]
      CE --> FI[UX Expert: figma-integration]
      FI --> H[PM: create UI Epics & stories]
      H --> I[Orchestrator: guide handoff to Dev]
      style A fill:#ADD8E6
      style B fill:#FFE4B5
      style C fill:#FFE4B5
      style C2 fill:#FFE4B5
      style D fill:#FFE4B5
      style DS fill:#FFE4B5
      style E fill:#ADD8E6
      style F fill:#ADD8E6
      style G fill:#FFE4B5
      style HP fill:#90EE90
      style SC fill:#FFE4B5
      style CE fill:#FFE4B5
      style FI fill:#FFE4B5
      style H fill:#ADD8E6
      style I fill:#F0E68C
    ```